![](../../picture/work/25.png)

![](../../picture/work/信贷生命周期.jpg)

![](../../picture/work/风控数据体系.jpg)

![](../../picture/work/策略开发流程.jpg)

![](../../picture/信贷.jpg)

额度阶段是在用户维度预测，而定价和申请阶段是在订单维度预测。

#### 金融基础

###### 消费金融

消金的《试点办法》，主要有这些特性：只能做个人消费信贷业务；单一借款人贷款余额不得超过20万元；可以查人行征信；资金可以通过境内同业拆借、向境外金融机构借款以及经批准发行金融债券进行融资；资本充足率不低于银监会有关监管要求；

###### 货币基金

货币基金资产主要投资于短期货币工具（一般期限在一年以内，平均期限120天），如国债、央行票据、商业票据、银行定期存单、政府短期债券、企业债券（信用等级较高）、同业存款等短期有价证券。

银行间同业拆借利率(SHIBOR)采用报价制度，以拆借利率为基础，即参与银行每天对各个期限的拆借品种进行报价，对报价进行加权平均处理后，公布各个期限的平均拆借利率即为SHIBOR利率。
同业拆借的交易期限较短，属临时性的资金融通。我国同业拆借期限最长不超过4个月
同业拆借是指商业银行之间利用资金融通过程的时间差、空间差、行际差来调剂资金而进行的短期借贷。

###### P2P网贷

P2P网络借贷：个人与个人间通过互联网平台实现的借贷交易，不过P2P平台并不会直接参与到借贷交易当中，只是为借贷双方提供信息搜集、资信评估、信息披露、撮合借贷等服务。
小额贷：由自然人、企业法人与其他社会组织投资设立，不吸收公众存款，经营小额贷款业务的有限责任公司或股份有限公司。

###### 小微企业贷

难点：单笔小微贷款的微薄利润难以支撑以人员密集型的模式去审批贷款的成本，可要做到自动化或半自动化授信，金融机构缺乏可靠的数据；没有财务报表或者财务报表不正规；现金流通常通过老板或财务的个人账户走账；合同、采购单和收据真假难辨；银行一般通过对企业主的审核来间接审核企业状况，但是个人的信用状况无法完全代表企业的状况；银行提供的贷款产品和服务与真实小微企业的需求不够切合，比如用款时间不匹配，申请流程繁杂等。

现金流、成长状况、信用记录、交易状况、销售增长、仓储周转、投诉纠纷

水文模型的内在逻辑源于城市的水文管理方法，在判断河道水位高低时，将数值与历史数据和周边河道数据进行判断，就能较为公允地判断河道的水位情况。同理，店铺销售也存在淡旺季，将时点销售额与不同时间、季节以及同类店铺的数据相比较，就能避免基于单一时间段对店铺进行额度核定。

做的买卖不同，对资金的需求程度和需求时间就不同，细分的产品对真实的贷款申请者而言更为方便和高效的同时，也一定程度上防范想蒙混过关、虚假骗贷或者有挪用资金意图的申请者。

从信贷产品开发角度而言，结合客户行为和客群定位，梳理客户从何种渠道而来、基于何种需求选择、以及在何种场景中决定借款及还款，才能形成信贷产品管理的完整闭环，确认这笔生意能否盈利。

获客质量还与对渠道的管理方式如返佣机制、惩戒机制有关。能够与渠道建立良好合作关系、使其优先导流优质客户的能力，也是一种风控能力。

###### 坏账准备金

在信贷中，准备金是为预期贷款损失准备的，是审慎信用风险管理中非常重要的措施。坏账准备金分为两大类：普通准备金：与具体账户无关，用于各类账户；专项准备金：为预计可能出现的问题而建立的准备金。

首先要专业科普3类基础资产状态追踪指标：`Current`：表示目前处于正常还款未发生逾期的金额/客户；`M1`：表示目前处于逾期一期的金额/客户，逾期天数范围在1-30天；`M2`：表示目前处于逾期二期的金额/客户，逾期天数范围在31-60天；`M6+`：表示目前处于逾期6期以上的金额/客户，逾期天数范围在180天以上；

再次要专业科普迁徙率这个指标的计算公式（以`C-M1`为例）：观察上述案例2017-06、07这两个月份的累积贷款资产，2017-06处于Current状态的资产总额为1003709860.9元，2017-07处于`M1`状态的资产总额为64125384.5元，所以，2017-07月`C-M1`的Roll Rate=64125384.5元/1003709860.9元=6.39%。通过对2017-07月迁徙率中间层数据进行累积加乘，可以计算出2017-07月不同资产状态追踪指标下流转到不良(`M6+`)或核销的概率，最后，对不同资产状态流转到不良(`M6+`)或核销的概率乘以2017-07月不同资产状态的资产金额，即可算出不同资产状态流转到不良(`M6+`)或核销的资产金额。将所有不同资产状态流转到不良(`M6+`)或核销的资产金额求和，即可测算出2018-08月应该预留的坏账准备金

###### 逾期

![](../../picture/1/133.png)
从上图可以发现，对于4月19日的账单，当超过正常还款期限后，即5月8日的最后还款日未还款，信用卡中心开始记录此笔账单发生逾期。此处有4个提醒注意点：账单日记录汇总上月账单日后的第一天到当月账单日的所有消费金额；出账单后即可对已出账单进行还款，在最后还款日之前还清账单金额均算正常还款；过了最后还款日仍未还款，则为逾期；一个客户只有一个账单日；

逾期在金融信贷业务细分中被划分为客户或账户级、订单级以及账单级，每一级都有对应的逾期阶段以及风控计算口径。

![](../../picture/1/134.png)

 一个客户可以有多个订单，每个订单又对应多个账单，进一步验证三级的递进关系。对于逾期，我们按照客户观测细分层级，也对应出账单逾期、订单逾期以及客户逾期。 

 所有的资产报告不良率的统计口径都是订单级。 在银行或非银机构的风控核心系统里，对于每一位借贷人都会存在借据表和还款计划表，里面记录了计算逾期的两个重要时间：约定还款时间和实际还款时间。再结合当前时间，既可以推算出逾期。  通过三个时间维度，我们会推算出三个与逾期相关性很高的2个指标：当前逾期天数、历史逾期天数。 

![](../../picture/1/135.png)

假设当前时间为2019年3月16日，订单A001还款期数为6期，对比约定还款日和实际还款日数据，每期的当前逾期天数的推算逻辑是：实际还款日有还款日期，则当前逾期天数即为0；实际还款日并没有发生还款行为的情况，当前逾期天数=当前时间-约定还款日；每期的历史逾期天数的统计逻辑：实际还款日有还款日期且大于当期约定还款日，则历史逾期天数=实际还款日-约定还款日；实际还款日并没有发生还款行为的情况，历史逾期天数=当前时间-约定还款日；

##### 风险定价

风险定价，顾明思义就是对风险进行定价。在信贷关系中，每个个体的还款意愿及还款能力都是不一样的，合理的风险定价能够为每个个体提供最符合其自身情况的风险价格，在这个基础上设计贷款能最大化贷款人的利润。

风险定价是围绕着以下几条公式来实现利润的最大化分配：利润=销售收入-成本、销售收入=利率$\times$在贷余额、成本=风险成本+其他成本、风险成本=违约概率$\times$风险敞口$\times$贷款违约损失

利率差异化：成本法：发放贷款的成本+由于贷款可能发生违约甚至损失而承担风险，而必须得到的风险补偿+通过发放贷款所预计实现的利润水平。这种风险适合历史数据积累较少的创新业务；利率基准加成法：选择某种基准利率为“基价”，为具有不同信用等级或风险程度的顾客确定不同水平的利差一般方式是在基准利率基础上“加点”，或乘上一个系数。这种方法适合成熟的市场，能获得有效的信用等级和基准利率参考。

额度差异化：针对不同用户的风险情况，给予差异化的额度，能够有效地控制风险敞口并且拉开各级用户间的授信差，从而最大化提升优质用户的价值及降低次级用户的风险损失。

还款期限差异化：另外一种定价差异化的方式为还款期限差异化。因为从概率论而言，风险概率越高的个体，风险敞口的暴露时间越长，则违约的概率就越高。所以从实际应用出发，符合放款标准但风险相对较高的用户往往能够获得的单笔贷款期限也越短。

还款方式差异化：还款方式差异化决定了贷款的本金暴露情况，所以也会根据用户的风险进行变化。一般来说，先息后本的产品往往被认为是风险最高的还款方式。一般还款方式包含以下几类：

- 等额本息：将收益和本息加起来后平均到每个月，每月偿还同等数额的资金(包括本息)，其实际利息与名义利息相一致。这种还款方式本金的归还速度相对较慢，占用资金时间较长，还款总利息较相同期限的等额本金高。
- 等额本金：在还款期内把贷款数总额等分，每期还款的本金相同，每期还款的利息是截至上期剩余本金乘以每期利率，所以前期要归还的利息较多，每期还款金额较多，压力较大，但随着剩余本金越来越少，每期的利息也会越来越小，所以后期每期还款金额越来越少，其实际利息与名义利息相一致。
- 等本等息：一般用于信用卡账单分期或者现金分期，或者小贷公司计算利息。等本等息每期还款的本金相同，同时每期还的利息也是相同的，都是用总贷款金额乘以每期贷款利率，所以最终的还款总利息远远高于等额本息和等额本金。
- 先息后本：是指借款人在贷款到期日一次性归还贷款本金，利息按月归还。这种还款方式，一般适用多月的中短期借款项目。
- 一次还本付息：一般用于银行存款，就是取钱的一次性结算本金和利息。在民间借贷中也时常使用，一次借款，到期时同时归还本金和利息。

##### 风控流程设计

目标是发现风险点（包括：信用卡欺诈、团伙窝案、高危用户等），降低风险；同时降低成本、提升效率。

![](../../picture/1/311.png)

身份核查：验证身份的真实性，是否为本人、是否有欺诈等行为；剔除其它点影响：行内黑名单、负面信息验证；将成本低的借贷意向验证放在成本高的团伙欺诈识别前面，达到节省成本的作用；结合人行拒绝规则、人行数据以及第三方数据建模，其优点是结合双方数据优势，模型效果会较好。但数据不稳定时，模型二次迭代工作量较大。

![](../../picture/1/312.png)

相较于案例 1，案例 2 较为保守，没有将人行数据和三方数据结合起来做来模型，对于拒绝的用户再次做人工审核，将符合的用户再次捞起来。这样做数据成本低，但是有人行客户模型效果下降，误杀率增加。

![](../../picture/1/313.png)

同案例 1 的区别：将各个数据构建子模型，然后整合为一个综合模型，如收入数据、支出数据建模。差异在于客群建模的差异，将不同的客群用户分开做模型。这样在评分二次迭代时，模型变量调整较少，主要调整各变量权重即可。但是在极端情况下，会出现某个评分变量不显著的情况。

综合上述三个案例，风控策略并不是完全依赖于成本，还要依赖于实际业务情况和业务目标。很多时候，风控流程是根据业务情况来进行的。

##### 设备指纹

**主动式设备指纹识别技术**：顾名思义，主动式设备指纹识别技术需要主动的得到设备的配合获取相应的信息，最直接的主动方法就是直接在设备上植入程序。主动式设备指纹所取特征均暴露于客户端，欺诈者可轻易通过一些一键新机等工具篡改相应特征信息，从而使指纹无效。

**被动式设备指纹识别技术**：每个设备厂家在设计网络操作系统时，为了体现竞争优势，往往在服务与协议的具体实现上有所不同，同时也会区分不同的版本和兼容性信息，这使得基于协议分析的指纹识别成为可行。被动式主要通过在服务器端收集通信协议和网络的特征来识别设备。

**混合式设备指纹技术**：混合式设备指纹技术指将主动式和被动式设备指纹技术整合在同一个设备识别与跟踪的架构中，将主动式设备指纹技术在客户端生成的设备标识符，与被动式设备指纹技术在服务器端收集的、协议栈相关的特征信息对应起来，使得所有的设备都有一个唯一的设备识别ID。

##### 多头借贷

 多头借贷是指单个借款人向2家或2家以上的金融机构提出借贷需求的行为。多头借贷数据一般至少会粗分成银行类多头借贷、非银类多头借贷。按时间跨度可以分为近7天、近15天、近1个月、近3个月、近6个月、近12个月。  多头借贷除了会统计申请次数，还会统计申请机构数、申请最大间隔天数、申请最小间隔天数、申请记录月份、平均每月申请次数(有申请月份平均)、最大月申请次数、最小月申请次数等。 

多头借贷少出现在模型变量中，主要有两个方面原因。

1. 多头借贷数据往往被策略同事应用于规则中。数据建模的目的是从金融弱变量中通过特征工程方法，提炼出有效区分变量，构建评分模型。所以对于多头借贷数据，既然已经运用在策略规则中，实在没必要加入到模型变量。
2. 多头借贷数据往往覆盖度不全。多头借贷虽然是一个与风险强关联的维度，但其查得率一直被人所诟病。

##### 三方数据

案例：现有1000个样本数据，分别测试2家黑名单，2家欺诈名单与2家多头，如何选择合适的第三方数据源？

首先要专业科普选择第三方数据源重要考察的5大指标计算公式（以黑名单为例）：

1. 查得率(Search rate)=查得数/样本量
2. 覆盖率(Cover rate)=查得命中黑名单数/样本中命中黑名单量
3. 误拒率(Error reject rate)=查得命中黑名单数/样本中通过且为Good量
4. 有效差异率(Effective difference rate)=查得命中黑名单数/样本中通过且Bad量
5. 无效差异率(Invalid difference rate)=查得命中黑名单数/样本中其他拒绝量

其中SR、CR、EDR指标越高越好，ERR越低越好，IDR与EDR结合起来观察，如果IDR和EDR都较高，反应的一种情况是数据源定义黑名单是广撒网式，黑名单质量相对不够精准。

其中前三个指标是重点考察，如果想更全面的测试第三方数据源，后面两个差异率指标也可以加入考核标准。

##### 策略与模型

有两种主流的风控决策应用架构：策略规则+评分模型 & 策略规则+模型规则。前者策略规则和评分模型是分开的，一般风控流程是先进行策略规则的风险判断，再进入评分模型的风险识别；后者是将评分模型的预测概率（或分数）转变为一个策略规则，与其他策略规则融合在一起进行风险决策。

###### 模型存在的问题

建模数据集与实际贷款人之间存在偏差，金融机构的模型一般以实际贷款人作为模型数据集，而申请人母集到贷款人子集往往发生较大变化，模型的判断就会出现一些偏差，此时需要根据策略维度的一些拒绝线，对模型进行一些矫正和保护。

模型数据集来自历史，与未来实际情况存在偏差，模型是基于历史数据找到数据之间的逻辑规律后，对未来事件进行预测。对于具有周期性的金融行业，如果用处于上升期的数据模型预测金融衰退期的事件，必然会与实际情况发生偏差。

模型对于目标变量的界定与实际商业目标存在偏差，模型为了权衡观察期的代表性和表现期的时效性，在建模时为了囊括最近的贷款数据，在界定“坏账”定义时，仅考虑前12个月的还款表现（有时仅考虑前6个月），此时对于一些中额长期的信贷产品，模型目标变量的界定与实际商业目标就发生了偏差。

###### 模型作用

评分卡模型的运用，主要是为了解决两大问题：线上借贷业务量逐渐增加的情景下，策略规则已经无法满足更细的切分需求；对于策略无法有效识别的大量灰色客群，需要使用评分卡进行风险判断；

现如今业界使用评分卡模型，更多的是为了解决第二个问题。

- 金融机构业务快速发展阶段：在业务发展早期阶段，业务量少、样本少、风险控制严格，这个时候风控策略规则足够，在金融机构要加快业务发展，此时不论是大量的客群样本、逾期表现的积累，还是风险控制的政策放松，都因为风险策略无法精准细分的局限性，而需要评分模型的介入，评分卡的应用场景更适用于人工分流。此阶段的评分模型，常常表现不稳定，比如KS波动较大，Lift下降较快，PSI时常过0.1。此阶段评分模型的优化更多在于分析波动原因，快速重新开发迭代。

- 金融机构业务发展稳定阶段：此时产品市场表现已经趋向稳定，反应在客群分析上，表现出稳定层级的客户画像，在这个阶段评分模型会在风控流程节点上进行一些调整，比如申请卡模型会进一步的前置，担当部分客群豁免的功能。同时，此时评分模型也会降低一些外部征信数据调用成本，控制因三方数据有误而引起的误杀。此阶段的评分模型，表现较为稳定，KS、Lift、PSI等指标波动较小，对于评分卡的迭代开发需求降低，评分卡的应用更加与业务需求、金融政策以及企业发展战略相关，在保证评分模型稳定性及相对精准度的前提下，使用模型调整系数进行全局模型的调整是此阶段的主要优化办法。





**逻辑1：侧重贷前**

- **计数**：过去6个月内的申请贷款总次数；
- **求和、极值**：过去一年内的贷款总额，最大金额，最小金额，中位数，众数等；
- **比例**：贷款申请额度与年收入占比；
- **时间差**：相邻借款时间差；
- **波动率**：过去3年内每次工作时间的标准差；
- **交叉**：切片或两变量融合。

**逻辑2：侧重贷前、贷中**

- **近度**：指最近一次动作时间。最近一次交易发生时间，最近一次登录时间；
- **频度**：指某指定时间段内发生动作的次数。一月内被查征信次数、发生交易次数，一季度申请次数、被拒卡次数等；
- **值度**：指某个时间范围内动作涉及的金额或等值金额。例如，交易发生的总金额、最高交易金额、平均交易金额等。

**逻辑3：侧重于贷中、贷后**

- 还款率类型特征（还款行为相关变量、核心、还款意愿和还款能力）
- 额度使用率类型特征（满额度针对的是还款压力问题）
- 逾期类型特征（逾期状态代表较高的逾期概率）
- 消费类型特征（线上消费、提现、消费用途等）

基于上述维度，一个变量，我们可以统计演变成几十个基于时间切片下不同维度特征的变量。

######  数据表

客户信息表，是借款人在申请金融机构信贷产品时，金融机构搜集借款人基础信息后，存放于后台数据库的数据表。不同金融机构在客户基础信息获取要求上各不相同，但在大体上，客户信息表的数据结构会包括以下几个维度：

合同信息表当借款客户完成申请全流程，确认借款且审批通过后，金融机构会针对每个借款人生成与之对应的贷款合同。合同信息表里详细记载了客户的贷款信息、贷款用途、放款信息、逾期状态、合同状态、利率。

还款计划表严格意义上应该分为约定还款和实际还款两部分，一部分是合同生成时就产生了，而另一部分是记录合同结束前客户的实际还款情况。还款计划表主要包括三大信息：约定还款、实际还款及其他信息。其中约定还款核心字段包括“当前期数”、“计划还款日”、“应还本金”、”应还利息“；实际还款核心字段包括”实际还款日期“、”已还本/利/罚“、“逾期本/利/罚”、“减免本/利/罚”；其他信息则包括“交易状态”、“逾期天数“、”剩余期数“等。

##### 风险损失估计

###### 风险和损失分类

市场风险、操作风险、信用风险、流动性风险、合规风险。

市场风险常见的是利率变动；

操作风险分为内部和外部风险，其中内部风险是指人为可控的；

信用风险是指客户未履约引起的风险，比如欺诈意向较强的完全不还款、偿债能力不足的部分还款，或者没有在账单日还款，但其后几天内足额还上当期欠款，对于第三种未履约行为，当逾期天数在公司风险容忍度范围内时，客户是可继续正常借贷，对于此类逾期行为轨迹，可衍生加工变量，用于行为评分卡开发，或者贷中贷后策略制定。

信用风险的预期损失和非预期损失

###### 成本分类

风险成本：信用风险的逾期损失

【资金成本】不同机构的资金成本差距较大，机构内部的资金有限，由于业务规模扩张，各机构都有不同方式的增资，持牌消金资金成本在4%~7%左右，助贷或者联合放款在7%~10%左右；

【运营成本】比如营销推广成本、三方支付成本等属于产品业务运营的成本

【人力成本】一般是涵盖催收人员或者线下产品的信审人员成本

【获客成本】不同渠道不同合作模式的获客成本差距较大，大致可以分为固收和分润两种，当机构自主风控能力较强，有自营类的产品时，才会有按照点击等付费方式。

【数据成本】客户申请或者贷中管理查询三方数据源的成本，有时也归为信审成本，有包年和单笔两种付费方式，在策略制定中如何测试评估数据源，以及调用优化也是一项非常重要的工作，已达到有效利用数据源并控制数据成本。

在巴塞尔协议中，违约率（PD）是指债务人无偿付债务的能力，发生了呆账，本息超过90天未支付，实际在工作中，违约率计算口径较为灵活，不一定必须设定为90天才算违约。

违约风险暴露敞口（EAD）是指客户违约时的暴露的风险敞口，不仅包含本金的剩余贷款余额，也包括利息、罚息，及违约后产品定义的收取的其他费用。

违约损失率（LGD）是指客户违约后发生损失的比率，由于LGD与贷款回收密切相关，通常用1-回收率计算估计，在不考虑折现以及催收费用情况下，回收率就是回收金额除以违约后的风险暴露

